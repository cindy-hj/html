<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판 글쓰기</title>
    <style>
        .container {
            width   : 600px;
            margin  : 0px auto;
            padding : 10px;
            border  : 3px solid #cccccc;
        }
        .lbl {
            display : inline-block;
            width   : 100px;
        }
        .item {
            margin-bottom   : 5px;
        }
    </style>
    <link href="css/quill.snow.css" rel="stylesheet" />
</head>
<body>
    <div class="container">
        <h3>게시판 글쓰기</h3>
        <hr />

        <div class="item">
            <label class="lbl">제목</label>
            <input type="text" id="title" placeholder="제목을 입력하세요." autofocus />
        </div>

        <div class="item">
            <label class="lbl">내용</label>
            <div id="editor" style="height: 400px;"></div>
        </div>

        <div class="item">
            <label class="lbl">작성자</label>
            <input type="text" id="title" placeholder="작성자를 입력하세요." />
        </div>

        <div class="item">
            <lable class="lbl"></lable>
            <button onclick="handleInsert()">글쓰기</button>
            <a href="/board1.html"><button>목록</button></a>
        </div>

        <!-- 여기서 부터 다시 복습 -->
        <script src="js/quill.min.js" type="text/javascript"></script>
        <script src="js/axios.min.js" type="text/javascript"></script>
        <script>
          
          var quill = new Quill('#editor', {
            theme: 'snow'
         });

        const title = document.getElementById('title');
        const writer = document.getElementById('writer');

        async function handleInsert() {
            console.log('handleInsert');

            if(title.value.length <=0) {
                alert('제목을 입력하세요.');
                title.focus();
                return false; 
            }

            console.log(quill.getText())
            if(quill.getText().length <=1) {
                alert('내용을 입력하세요.');
                quill.root.focus();
                return false;
            }
            if(writer.value === '') {
                alert('작성자를 입력하세요.');
                writer.focus();
                return false;
            }

            const url = 'http://1.234.5.158:23000/board101/insert.json' ;
            const headers = {"Content-Type":"application/json"} ;
            const body = {
                title : title.value,
                content : quill.getText(),
                writer : writer.value
            };

            const { data } = await axios.post( url, body, {headers} )
            console.log(data);

            if(data.status === 200) {
                alert('글쓰기 성공');
                window.location.href="/board1.html"; //a 태그와 같은 기능
            }
        }
    
         </script>
    </div>
</body>
</html>